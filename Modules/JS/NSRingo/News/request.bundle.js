console.log("ï£¿ iRingo: \uD83D\uDCF0 ï£¿News"),console.log("request.bundle.js"),console.log("Version: 3.1.5"),(()=>{"use strict";let e;var t={},s={};function a(e){var r=s[e];if(void 0!==r)return r.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.rv=function(){return"1.0.13"},a.ruid="bundler=rspack@1.0.13";let r=function(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":"undefined"!=typeof Egern?"Egern":void 0}();class o{static name="Lodash";static version="1.2.2";static about(){return console.log(`
ðŸŸ§ ${this.name} v${this.version}
`)}static get(e={},t="",s){!Array.isArray(t)&&(t=this.toPath(t));let a=t.reduce((e,t)=>Object(e)[t],e);return void 0===a?s:a}static set(e={},t="",s){return!Array.isArray(t)&&(t=this.toPath(t)),t.slice(0,-1).reduce((e,s,a)=>Object(e[s])===e[s]?e[s]:e[s]=/^\d+$/.test(t[a+1])?[]:{},e)[t[t.length-1]]=s,e}static unset(e={},t=""){return!Array.isArray(t)&&(t=this.toPath(t)),t.reduce((e,s,a)=>a===t.length-1?(delete e[s],!0):Object(e)[s],e)}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static escape(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}static unescape(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,e=>t[e])}}class i{static name="Storage";static version="1.1.0";static about(){return c("",`ðŸŸ§ ${this.name} v${this.version}`,"")}static data=null;static dataFile="box.dat";static #e=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(e=new String,t=null){let s=t;if(!0===e.startsWith("@")){let{key:t,path:a}=e.match(this.#e)?.groups;e=t;let r=this.getItem(e,{});"object"!=typeof r&&(r={}),s=o.get(r,a);try{s=JSON.parse(s)}catch(e){}}else{switch(r){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":s=$persistentStore.read(e);break;case"Quantumult X":s=$prefs.valueForKey(e);break;case"Node.js":this.data=this.#t(this.dataFile),s=this.data?.[e];break;default:s=this.data?.[e]||null}try{s=JSON.parse(s)}catch(e){}}return s??t}static setItem(e=new String,t=new String){let s=!1;if("object"==typeof t)t=JSON.stringify(t);else t=String(t);if(!0===e.startsWith("@")){let{key:a,path:r}=e.match(this.#e)?.groups;e=a;let i=this.getItem(e,{});"object"!=typeof i&&(i={}),o.set(i,r,t),s=this.setItem(e,i)}else switch(r){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":s=$persistentStore.write(t,e);break;case"Quantumult X":s=$prefs.setValueForKey(t,e);break;case"Node.js":this.data=this.#t(this.dataFile),this.data[e]=t,this.#s(this.dataFile),s=!0;break;default:s=this.data?.[e]||null}return s}static removeItem(e){let t=!1;if(!0===e.startsWith("@")){let{key:s,path:a}=e.match(this.#e)?.groups;e=s;let r=this.getItem(e);"object"!=typeof r&&(r={}),keyValue=o.unset(r,a),t=this.setItem(e,r)}else switch(r){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":t=!1;break;case"Quantumult X":t=$prefs.removeValueForKey(e);break;default:t=!1}return t}static clear(){let e=!1;switch(r){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":e=!1;break;case"Quantumult X":e=$prefs.removeAllValues();break;default:e=!1}return e}static #t(e){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),r=!a&&this.fs.existsSync(s);if(!a&&!r)return{};try{return JSON.parse(this.fs.readFileSync(a?t:s))}catch(e){return{}}}}static #s(e=this.dataFile){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");let t=this.path.resolve(e),s=this.path.resolve(process.cwd(),e),a=this.fs.existsSync(t),r=!a&&this.fs.existsSync(s),o=JSON.stringify(this.data);a?this.fs.writeFileSync(t,o):r?this.fs.writeFileSync(s,o):this.fs.writeFileSync(t,o)}}}function n(e={}){switch(r){case"Surge":e.policy&&o.set(e,"headers.X-Surge-Policy",e.policy),c("",`ðŸš© æ‰§è¡Œç»“æŸ! ðŸ•› ${new Date().getTime()/1e3-$script.startTime} ç§’`,""),$done(e);break;case"Loon":e.policy&&(e.node=e.policy),c("",`ðŸš© æ‰§è¡Œç»“æŸ! ðŸ•› ${(new Date-$script.startTime)/1e3} ç§’`,""),$done(e);break;case"Stash":e.policy&&o.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy)),c("",`ðŸš© æ‰§è¡Œç»“æŸ! ðŸ•› ${(new Date-$script.startTime)/1e3} ç§’`,""),$done(e);break;case"Egern":case"Shadowrocket":default:c("",`ðŸš© æ‰§è¡Œç»“æŸ!`,""),$done(e);break;case"Quantumult X":e.policy&&o.set(e,"opts.policy",e.policy),delete e["auto-redirect"],delete e["auto-cookie"],delete e["binary-mode"],delete e.charset,delete e.host,delete e.insecure,delete e.method,delete e.opt,delete e.path,delete e.policy,delete e["policy-descriptor"],delete e.scheme,delete e.sessionIndex,delete e.statusCode,delete e.timeout,e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,delete e.body):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),delete e.body):e.body&&delete e.bodyBytes,c("",`ðŸš© æ‰§è¡Œç»“æŸ!`,""),$done(e);break;case"Node.js":c("",`ðŸš© æ‰§è¡Œç»“æŸ!`,""),process.exit(1)}}let c=(...e)=>console.log(e.join("\n")),h={News:{Settings:{Switch:!0,CountryCode:"US",NewsPlusUser:!0}},Default:{Settings:{Switch:!0},Configs:{Storefront:{AE:"143481",AF:"143610",AG:"143540",AI:"143538",AL:"143575",AM:"143524",AO:"143564",AR:"143505",AT:"143445",AU:"143460",AZ:"143568",BA:"143612",BB:"143541",BD:"143490",BE:"143446",BF:"143578",BG:"143526",BH:"143559",BJ:"143576",BM:"143542",BN:"143560",BO:"143556",BR:"143503",BS:"143539",BT:"143577",BW:"143525",BY:"143565",BZ:"143555",CA:"143455",CD:"143613",CG:"143582",CH:"143459",CI:"143527",CL:"143483",CM:"143574",CN:"143465",CO:"143501",CR:"143495",CV:"143580",CY:"143557",CZ:"143489",DE:"143443",DK:"143458",DM:"143545",DO:"143508",DZ:"143563",EC:"143509",EE:"143518",EG:"143516",ES:"143454",FI:"143447",FJ:"143583",FM:"143591",FR:"143442",GA:"143614",GB:"143444",GD:"143546",GF:"143615",GH:"143573",GM:"143584",GR:"143448",GT:"143504",GW:"143585",GY:"143553",HK:"143463",HN:"143510",HR:"143494",HU:"143482",ID:"143476",IE:"143449",IL:"143491",IN:"143467",IQ:"143617",IS:"143558",IT:"143450",JM:"143511",JO:"143528",JP:"143462",KE:"143529",KG:"143586",KH:"143579",KN:"143548",KP:"143466",KR:"143466",KW:"143493",KY:"143544",KZ:"143517",TC:"143552",TD:"143581",TJ:"143603",TH:"143475",TM:"143604",TN:"143536",TO:"143608",TR:"143480",TT:"143551",TW:"143470",TZ:"143572",LA:"143587",LB:"143497",LC:"143549",LI:"143522",LK:"143486",LR:"143588",LT:"143520",LU:"143451",LV:"143519",LY:"143567",MA:"143620",MD:"143523",ME:"143619",MG:"143531",MK:"143530",ML:"143532",MM:"143570",MN:"143592",MO:"143515",MR:"143590",MS:"143547",MT:"143521",MU:"143533",MV:"143488",MW:"143589",MX:"143468",MY:"143473",MZ:"143593",NA:"143594",NE:"143534",NG:"143561",NI:"143512",NL:"143452",NO:"143457",NP:"143484",NR:"143606",NZ:"143461",OM:"143562",PA:"143485",PE:"143507",PG:"143597",PH:"143474",PK:"143477",PL:"143478",PT:"143453",PW:"143595",PY:"143513",QA:"143498",RO:"143487",RS:"143500",RU:"143469",RW:"143621",SA:"143479",SB:"143601",SC:"143599",SE:"143456",SG:"143464",SI:"143499",SK:"143496",SL:"143600",SN:"143535",SR:"143554",ST:"143598",SV:"143506",SZ:"143602",UA:"143492",UG:"143537",US:"143441",UY:"143514",UZ:"143566",VC:"143550",VE:"143502",VG:"143543",VN:"143471",VU:"143609",XK:"143624",YE:"143571",ZA:"143472",ZM:"143622",ZW:"143605"}}}};let l=new class e{constructor(e,t){return console.log(`
ðŸŸ§ URL v2.1.2
`),e=this.#a(e,t),this}#a(e,t){let s=/(?:(?<protocol>\w+:)\/\/(?:(?<username>[^\s:"]+)(?::(?<password>[^\s:"]+))?@)?(?<host>[^\s@/]+))?(?<pathname>\/?[^\s@?]+)?(?<search>\?[^\s?]+)?/,a=/(?<hostname>.+):(?<port>\d+)$/;if(e=e.match(s)?.groups||{},t&&(!(t=t?.match(s)?.groups||{}).protocol||!t.hostname))throw Error(`ðŸš¨ ${name}, ${t} is not a valid URL`);if((e.protocol||t?.protocol)&&(this.protocol=e.protocol||t.protocol),(e.username||t?.username)&&(this.username=e.username||t.username),(e.password||t?.password)&&(this.password=e.password||t.password),(e.host||t?.host)&&(this.host=e.host||t.host,Object.freeze(this.host),this.hostname=this.host.match(a)?.groups.hostname??this.host,this.port=this.host.match(a)?.groups.port??""),e.pathname||t?.pathname){if(this.pathname=e.pathname||t?.pathname,!this.pathname.startsWith("/")&&(this.pathname="/"+this.pathname),this.paths=this.pathname.split("/").filter(Boolean),Object.freeze(this.paths),this.paths){let e=this.paths[this.paths.length-1];if(e?.includes(".")){let t=e.split(".");this.format=t[t.length-1],Object.freeze(this.format)}}}else this.pathname="";return(e.search||t?.search)&&(this.search=e.search||t.search,Object.freeze(this.search),this.search&&(this.searchParams=this.search.slice(1).split("&").map(e=>e.split("=")))),this.searchParams=new Map(this.searchParams||[]),this.harf=this.toString(),Object.freeze(this.harf),this}toString(){let e="";return this.protocol&&(e+=this.protocol+"//"),this.username&&(e+=this.username+(this.password?":"+this.password:"")+"@"),this.hostname&&(e+=this.hostname),this.port&&(e+=":"+this.port),this.pathname&&(e+=this.pathname),0!==this.searchParams.size&&(e+="?"+Array.from(this.searchParams).map(e=>e.join("=")).join("&")),e}toJSON(){return JSON.stringify({...this})}}($request.url);c(`âš  url: ${l.toJSON()}`,"");let p=$request.method,d=l.hostname,u=l.pathname;c(`âš  METHOD: ${p}, HOST: ${d}, PATH: ${u}`,"");let f=($request.headers?.["Content-Type"]??$request.headers?.["content-type"])?.split(";")?.[0];c(`âš  FORMAT: ${f}`,""),(async()=>{let{Settings:e,Caches:t,Configs:s}=function(e,t,s){c(`â˜‘ï¸ Set Environment Variables`,"");let{Settings:a,Caches:r,Configs:n}=function(e,t,s){let a=i.getItem(e,s),r={};switch(typeof $argument){case"string":let n=Object.fromEntries($argument.split("&").map(e=>e.split("=").map(e=>e.replace(/\"/g,""))));for(let e in n)o.set(r,e,n[e]);break;case"object":for(let e in $argument)o.set(r,e,$argument[e])}let c={Settings:s?.Default?.Settings||{},Configs:s?.Default?.Configs||{},Caches:{}};for(let e of(!Array.isArray(t)&&(t=[t]),t))c.Settings={...c.Settings,...s?.[e]?.Settings,...r,...a?.[e]?.Settings},c.Configs={...c.Configs,...s?.[e]?.Configs},a?.[e]?.Caches&&"string"==typeof a?.[e]?.Caches&&(a[e].Caches=JSON.parse(a?.[e]?.Caches)),c.Caches={...c.Caches,...a?.[e]?.Caches};return function e(t,s){for(var a in t){var r=t[a];t[a]="object"==typeof r&&null!==r?e(r,s):s(a,r)}return t}(c.Settings,(e,t)=>("true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map(e=>h(e)):h(t)),t)),c;function h(e){return e&&!isNaN(e)&&(e=parseInt(e,10)),e}}(e,t,s);if(c(`âœ… Set Environment Variables, Settings: ${typeof a}, Settingså†…å®¹: ${JSON.stringify(a)}`,""),n.Locale&&(n.Locale=new Map(n.Locale)),n.i18n)for(let e in n.i18n)n.i18n[e]=new Map(n.i18n[e]);return{Settings:a,Caches:r,Configs:n}}("iRingo","News",h);switch(c(`âš  Settings.Switch: ${e?.Switch}`,""),e.Switch){case!0:default:let a={};switch(p){case"POST":case"PUT":case"PATCH":case"DELETE":switch(f){case void 0:case"application/x-www-form-urlencoded":case"text/plain":default:case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":case"text/xml":case"text/html":case"text/plist":case"application/xml":case"application/plist":case"application/x-plist":case"text/vtt":case"application/vtt":break;case"text/json":case"application/json":switch(a=JSON.parse($request.body??"{}"),d){case"news-edge.apple.com":case"news-todayconfig-edge.apple.com":if("/v1/configs"===u)"AUTO"!==e.CountryCode&&(a.storefrontId=s.Storefront[e.CountryCode]),a?.deviceInfo?.preferredLanguages&&(a.deviceInfo.preferredLanguages.unshift("zh-SG","zh-Hans-US","zh-Hant-US"),a.deviceInfo.preferredLanguages.push("en")),"AUTO"!==e.CountryCode&&(a.deviceInfo.countryCode=e?.CountryCode??"US");break;case"news-events.apple.com":case"news-sports-events.apple.com":if("/analyticseventsv2/async"===u)a?.data?.session?.mobileData&&(a.data.session.mobileData.countryCode="310",a.data.session.mobileData.carrier="Google Fi",a.data.session.mobileData.networkCode="260");break;case"news-client-search.apple.com":}$request.body=JSON.stringify(a);case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"applecation/octet-stream":}case"GET":case"HEAD":case"OPTIONS":default:switch(d){case"news-edge.apple.com":case"news-todayconfig-edge.apple.com":break;case"news-events.apple.com":case"news-sports-events.apple.com":break;case"news-client-search.apple.com":if("/v1/search"===u){let t=l.searchParams.get("parsecParameters"),a=l.searchParams.get("storefrontID"),r=l.searchParams.get("newsPlusUser");if(t){let a=decodeURIComponent(t);(a=JSON.parse(a)).storeFront&&"AUTO"!==e.CountryCode&&(a.storeFront=a.storeFront.replace(/[\d]{6}/,s.Storefront[e.CountryCode])),a=encodeURIComponent(a=JSON.stringify(a)),l.searchParams.set("parsecParameters",a)}a&&"AUTO"!==e.CountryCode&&l.searchParams.set("storefrontID",s.Storefront[e.CountryCode]),r&&l.searchParams.set("newsPlusUser",e.NewsPlusUser||r)}}case"CONNECT":case"TRACE":}$request.url=l.toString(),c(`ðŸš§ è°ƒè¯•ä¿¡æ¯`,`$request.url: ${$request.url}`,"");case!1:}})().catch(e=>(function(e){switch(r){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:c("",`â—ï¸æ‰§è¡Œé”™è¯¯!`,e,"");break;case"Node.js":c("",`â—ï¸æ‰§è¡Œé”™è¯¯!`,e.stack,"")}})(e)).finally(()=>{if(void 0===e)n($request);else if(e.headers?.["Content-Encoding"]&&(e.headers["Content-Encoding"]="identity"),e.headers?.["content-encoding"]&&(e.headers["content-encoding"]="identity"),"Quantumult X"===r)!e.status&&(e.status="HTTP/1.1 200 OK"),delete e.headers?.["Content-Length"],delete e.headers?.["content-length"],delete e.headers?.["Transfer-Encoding"],n(e);else n({response:e})})})();
//# sourceMappingURL=request.bundle.js.map